<html>
<head>
<meta name="version" value="$Id: manual.html,v 1.14 2004/08/02 16:52:04 reyesric Exp $">
<style>
BODY { font-family: Arial, Helvetica, sans serif; }
a { text-decoration: none; }
H1 { font-size: 23pt; padding-top: 18pt; }
H2 { font-size: 14pt; padding-top: 14pt; }
H3 { font-size: 12pt; padding-top: 12pt; }
P, TH, LI { font-size: 10pt; text-align: justify;}
LI { padding: 2px; }
TH { border-bottom: 2px solid #6080d0; padding: 6px; }
TD { font-size: 9pt; vertical-align: top; text-align: left; padding: 4px;}
TR.odd { background-color: #d8e6ff; }
TT, .fixed { font-family: Courier New, Courier, fixed; }
.fixed { font-weight: bold; }
.flat { text-align: center; background-color: #d0e0ff; border: 0px solid #8080d0; border-spacing: 0px; }
.release { font-weight: bold; color: #990000; list-style: none; padding-top: 12pt;}
.release_text { font-weight: normal; color: black; }

.header { clear: both; }
.toc {float: right; background-color: #d8e6ff; padding: 20px; margin: 10pt;}
.toc h2 { padding-top: 0pt;}
.toc ul { list-style: none; margin-left: 0;}
.main {float: left; }
</style>
<title>Newspipe</title>
</head>
<body>

<div class="header">
	<H1>Newspipe</H1>
</div>

<div class="toc">
<h2>Table of Content</h2>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#features">Features</a></li>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#downloads">Downloads</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#mailheaders">Mail Headers</a></li>
<li><a href="#acknowledgements">Acknowledgements</a></li>
<li><a href="#contact">Contact</a></li>
<li><a href="#references">References</a></li>
<li><a href="#changelog">Changelog</a></li>
</ul>
<br>

<a href="http://sourceforge.net"><img src="http://sourceforge.net/sflogo.php?group_id=114820&amp;type=2" width="125" height="37" border="0" alt="SourceForge.net Logo" /></a>

<br>

<p> 
<a href="http://sourceforge.net/export/rss2_projfiles.php?group_id=114820"><IMG src="http://images.sourceforge.net/images/xml.png" border="0" alt="RSS Feed Available" width="36" height="14"></a> (new releases)
</p>

<p><a href="http://sourceforge.net/projects/newspipe">Newspipe's Home<br>at Sourceforge.net</a></p>

</div

<div class="main">
<a name="introduction"></a>
<H2>Introduction</H2>

<p><tt>newspipe</tt> is an <a href="#rss">RSS</a>/<a href="#atom">Atom</A> aggregator with a difference: It allows you to keep track of your feeds through e-mail.</p>
<p>You can read, organize and archive news feeds with your current mail client, without the need for a separate program. <tt>newspipe</tt> collects all your news and sends it to you as plaintext or <tt>HTML</tt> mail, both as single items or grouped in a digest.</p>

<p><tt>newspipe</tt> is the creation of <a href="#contact">Ricardo M. Reyes</a>, and started out as an <a href="#rss">RSS</a>-to-<tt>POP3</tt> converter called <tt>rss2pop3</tt>. Over time, it grew to the extent where real-time collection via <tt>POP3</tt> wasn't flexible enough, and it was retooled to work via <tt>SMTP</tt>.

<a name="features"></a>
<H2>Features</H2>

<ul>
<li>uses <a href="http://www.diveintomark.org/">Mark Pilgrim's</a> <a href="http://www.feedparser.org/">Universal Feed Parser</a> to support <a href="#rss">RSS</a> and <a href="#atom">Atom</a> feeds</li>
<li>feeds are listed in an <a href="#opml">OPML</a> file</li>
<ul>
<li>feed options can be set individually for each feed or for a group of feeds</li>
<li>supports screen-scraping scripts via an internal <tt>pipe://</tt> URI schema</li>
<li>the <a href="#opml">OPML</a> file can reside locally (in your hard disk) or remotely (in a web server).</li>
</ul>
<li>sends news items via <tt>SMTP</tt> to a designated e-mail address</li>
<ul>
<li>messages can be in <tt>HTML</tt>/multipart <tt>MIME</tt> format or plaintext</li>
<li>multiple items from a feed can be grouped and sent in a digest message</li>
<li>updated news items are detected and re-sent with <font color="#337700"><b>additions</b></font> and <font color="#FF0000"><STRIKE>deletions</STRIKE></font> highlighted</li>
<li>images linked from the feed items are downloaded and included as INLINE images in the emails.
<li>a mobile view of a feed (a text-only copy) can be sent to a secondary e-mail address (to read on a PDA or an MMS-enabled mobile phone)</li>
</ul>
<li>full support of HTTP optimizations, like GZip compression, <tt>If-Modified-Since</tt> and <tt>If-None-Match</tt> headers. Feeds and image files will only be downloaded when they have changed.</li>
</ul>

<a name="requirements"></a>
<H2>Requirements</H2>
<p>To use <tt>newspipe</tt>, you need:</p>

<ul>
<li><a href="http://www.python.org">Python</a> 2.3 or above</li>
<li>access to an <tt>SMTP</tt> server</li>
<li>a mail client (preferably one capable of displaying <tt>HTML</tt> mail)</li>
</ul>

<p>All the required libraries are included in the distributions .zip file.</p>

<p><tt>newspipe</tt> has so far been successfully tested on:</p>
<ul>
<li>Windows (plain and <a href="http://www.cygwin.com">Cygwin</a>)</li>
<li>Linux</li>
<li>Mac OS X (10.3.x)</li>
</ul>

<a name="downloads"></a>
<H2>Download</H2>

<p>You can download the latest stable version from <a href="http://sourceforge.net/project/showfiles.php?group_id=114820&package_id=124374">here</a>.</p>

<p>If you would like to try the latest version and you have a CVS client, you are welcome to download it from the CVS repository (module newspipe at cvs.sourceforge.net:/cvsroot/newspipe). You can also browse the latest source code <a href="http://cvs.sourceforge.net/viewcvs.py/newspipe/newspipe/">here</a>.</p>

<a name="installation"></a>
<H2>Installation</H2>

<p>To install <tt>newspipe</tt>, just unzip the files you downloaded to a new folder, and edit the file newspipe.ini. The only parameters you absolutely need to edit are <tt>smtp_server</tt> and <tt>opml</tt>: </p>

<ul>
<li><tt>smtp_server</tt> should have the address of the mail server you'll use to send the emails. Here you can use the network name of the server, or the IP address. If you intend to use a local server that runs on your machine, use the address 127.0.0.1 </li>

<li><tt>opml</tt> should point to your OPML file that lists the feeds you are subscribed to. If your are currently using another aggregator, it probably has an option or command to export your subscription list. If not, you can start a new file editing the <tt>test.ompl</tt> included in the .zip file you downloaded. </li>
</ul>

<p>Make sure that the <tt>ownerName</tt> and <tt>ownerEmail</tt> options at the top of the OPML file are correct. They should show your name and email address, and <tt>newspipe</tt> will use them to form the recipient of the emails.</p>

<p>Once the configuration files are set, just execute the script <tt>newspipe.py</tt>. In Windows, it's usually enough to double-click on it, or you can create a shortcut to it. In Unix/Linux, run it trough Python's interpreter, with the command: <tt> python newspipe.py </tt> (assuming Python binaries are in the search PATH).

<a name="configuration"></a>
<H2>Configuration</H2>

<p>There are two main sets of configuration options program-wide options set via a .INI file, and per-feed options set inside the <a href="#opml">OPML</a> file.</p> 

<H3>.INI file Options</H3>

<table class="flat">
  <tr>
    <th>Key</th><th>Default</th><th>Notes</th>
  </tr>
  <tr class="odd">
    <td class="fixed">opml</td>
    <td><i>None</i></td>
    <td>REQUIRED - the filename or URL of the <a href="#opml">OPML</a> file with the list of feeds to check</td>
  </tr>
  <tr>
    <td class="fixed">smtp_server</td>
    <td><i>None</i></td>
    <td>REQUIRED - fully qualified domain name or IP address of the <tt>SMTP</tt> server to send messages through</td>
  </tr>
  <tr class="odd">
    <td class="fixed">sender</td>
    <td><i>None</i></td>
    <td>optional e-mail address to use as <tt>From:</tt> - overrides the OPML <tt>ownerEmail</tt> field.</td>
  </tr>
  <tr>
    <td class="fixed">textonly</td>
    <td>0</td>
    <td>if set to 1, all the messages sent by <tt>newspipe</tt> will be sent in plain text format.</td>
  </tr>
  <tr class="odd">
    <td class="fixed">log_console</td>
    <td>0</td>
    <td>If set to 1, this will send logging output to the console <i>and</i> to the log file.</td>
  </tr>
  <tr>
    <td class="fixed">check_online</td>
    <td><i>None</i></td>
    <td>If present, should be the URL of a webpage that the program will try to fetch to determine if there is a network connection available - useful for dialup users that may not be always online.<br>A good value for this is <a href="http://www.google.com">http://www.google.com</a>.</td>
  </tr>
  <tr class="odd">
    <td class="fixed">sleep_time</td>
    <td>5</td>
    <td>	Number of minutes to wait before re-checking feeds. If the value is 0, then the program will exit after checking all feeds, instead of waiting to start again (batch mode).</td>
  </tr>
  <tr>
    <td class="fixed">offline</td>
    <td>0</td>
    <td>If set to 1, the program won't try to fetch any data from the internet, using cached versions instead. Useful for debugging.</td>
  </tr>
  <tr class="odd">
    <td class="fixed">debug</td>
    <td>0</td>
    <td>If set to 1, logging becomes more verbose. Useful for debugging.</td>
  </tr>
  <tr>
    <td class="fixed">workers</td>
    <td>10</td>
    <td>Number of threads to use simultaneusly. Bigger numbers should mean better performance, but with increased memory and CPU use.<br>Dialup users may want to change this to 3, since more threads may also mean more timeout errors for them.</td>
  </tr>
  <tr class="odd">
    <td class="fixed">send_immediate</td>
    <td>0</td>
    <td>If set to 1, <tt>newspipe</tt> will send all messages as they are parsed instead of in a single long SMTP transaction at the end of its run. Useful to avoiding choking your SMTP server with a lot of messages at once.</td>
  </tr>
  <tr>
    <td class="fixed">can_pipe</td>
    <td>0</td>
    <td><p>Enables <tt>pipe://</tt> URI support. When set to 1, the program will accept feed URLs that start with <tt>pipe://</tt> - and arbitrary protocol name used to tell <tt>newswire</tt> that to get the feed data, it should run the program or command after the <tt>pipe://</tt> and use its standard output as feed data.</p>
    <p>Example:</p>
    <tt>&lt;outline ... xmlURL="pipe://python.exe scrape_site.py" /&gt;</tt>
    <p>tells <tt>newspipe</tt> to run</p>
    <tt>python.exe scrape_site.py</tt>
    <p>and capture its standard output as feed data. This allows you to use screen-scraping scripts to generate feed data from sites that have no <a href="#rss">RSS</a> feeds, and since it makes <tt>newspipe</tt> invoke external programs, it is disabled by default as a security measure.
    </td>
  </tr>   
</table>
 
<H3>OPML Options</H3>

<p>Since <a href="#opml">OPML</a> is an hierarchical format, you can have multiple <tt>outline</tt> items nested inside each other. Some <tt>outline</tt> items will denote single feeds, and some will group related sets of feeds together.</p>
<p><tt>newspipe</tt> allows you to use any sort of layout you like, and lets you set feed options on a group basis or for a single feed:</p>

<pre>
&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;opml version="1.1"&gt;
  &lt;head&gt;
    &lt;title&gt;test.opml&lt;/title&gt;
      &lt;ownerName&gt;Newspipe User&lt;/ownerName&gt;
      &lt;ownerEmail&gt;newspipe@localhost&lt;/ownerEmail&gt;
      &lt;ownerMobile&gt;newspipe@mobile.net&lt;/ownerMobile&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;!-- daily digests --&gt;
    &lt;outline text="Digest" digest="1" delay="1440"&gt;
      &lt;outline description="Boing Boing"
         htmlUrl="http://boingboing.net"
         title="Boing Boing Blog"
         xmlUrl="http://boingboing.net/rss.xml"
      /&gt;
      
      ...
    &lt;/outline&gt;

    &lt;!-- normal feeds --&gt;
    &lt;outline description="One message per item" delay="30"&gt;
      &lt;!-- single items are _also_ pushed to my mobile --&gt;
      &lt;outline description="News for nerds, stuff that matters"
        htmlUrl="http://slashdot.org/"
        title="Slashdot"
        xmlUrl="http://slashdot.org/slashdot.rss"
        mobile="1"
      /&gt;
      
      ...
    &lt;/outline&gt;
  &lt;/body&gt;
&lt;opml&gt;
</pre>

<table class="flat">
  <tr>
    <th>Attribute</th><th>Default</th><th>Notes</th>
  </tr>
  <tr class="odd">
    <td class="fixed">text</td>
    <td><i>None</i></td>
    <td>REQUIRED - Title of the feed, to be used in the log files.</td>
  </tr>
  <tr>
    <td class="fixed">htmlUrl</td>
    <td><i>None</i></td>
    <td>REQUIRED - URL of the site related to this feed. It's used in the "Home" link in the footer of each email.</td>
  </tr>
  <tr class="odd">
    <td class="fixed">xmlUrl</td>
    <td><i>None</i></td>
    <td>REQUIRED - URL of the RSS/Atom feed</td>
  </tr>
  <tr>
    <td class="fixed">digest</td>
    <td>0</td>
    <td>If set to "1", all the new or modified items in the feed will be grouped to a single email.</td>
  </tr>
  <tr class="odd">
    <td class="fixed">titles</td>
    <td>1</td>
    <td>If set to "0", the digest email will have a more compact format, without titles, separator, author name and date-time of each item. This setting only works when <tt>digest="1"</tt> and is useful in feeds that don't have titles in their items, like scripting.com.</td>
  </tr>
    <tr>
    <td class="fixed">download_link</td>
    <td>0</td>
    <td>If set to "1", Newspipe will download the webpage linked by each item, and use the html code of that page instead of the text of the item. This is useful to get full text entries of feeds that only have exerpts. Use with caution, the resulting emails can get really big when the linked webpage has too many images, or long text (like Slashdot's).</td>
  </tr>
  <tr class="odd">
    <td class="fixed">diff</td>
    <td>1</td>
    <td>If set to "1", <tt>newspipe</tt> will compare the text of each item with the previous version (if any) stored in the cache, and will highlight any <font color="#337700"><b>additions</b></font> and <font color="#FF0000"><STRIKE>deletions</STRIKE></font> in the text. You can disable this feature seting this parameter to "0" if it gets too distracting.</td>
  </tr>
  <tr>
    <td class="fixed">check_text</td>
    <td>1</td>
    <td>When this parameter is set to "0", Newspipe will not re-send items previously seen, even if the text of the item has changed. When set to "1", old items that have any change in their text will be treated as new items, and will be sent by email.</td>
  </tr>
  <tr class="odd">
    <td class="fixed">delay</td>
    <td>60</td>
    <td>Number of minutes to wait between checks to this feed.</td>
  </tr>
  <tr>
    <td class="fixed">textonly</td>
    <td>0</td>
    <td>If set to "1", the emails of this feed will be in plain-text format, instead of HTML.</td>
  </tr>
  <tr class="odd">
    <td class="fixed">mobile</td>
    <td>0</td>
    <td>If set to "1" and the OPML file has a <tt>ownerMobile</tt> field, a text-only copy of the feed items will be sent to <tt>ownerMobile</tt> (useful for PDAs or MMS-enabled mobile phones)</td>
  </tr>
</table>

<a name="mailheaders"></a>
<H2>Mail Headers</H2>

<p><tt>newspipe</tt> adds a number of mail headers to messages that you can use to filter or classify them into folders, and which also provide some useful information as to what it has done to parse the feed:</p>

<table class="flat">
  <tr>
    <th>Header</th><th>Values & Meaning</th>
  </tr>
  <tr class="odd">
    <td class="fixed">X-Item-Attributes</td><td>attributes parsed by <tt>newspipe</tt> while building the message</td>
  </tr>
  <tr>
    <td class="fixed">X-Item-Text-Key</td><td>feed attribute that contained the item text </td>
  </tr>
  <tr class="odd">
    <td class="fixed">X-Newspipe-Version</td><td>program version number and revision</td>
  </tr>
  <tr>
    <td class="fixed">X-Channel-Feed</td><td>feed URL (same as the <tt>xmlURL</tt> attribute in the OPML file)</td>
  </tr>
  <tr class="odd">
    <td class="fixed">X-Channel-X-Cache-Result</td><td>whether the data was downloaded ("Downloaded")</td>
  </tr>
  <tr>
    <td class="fixed">X-Channel-Title</td><td>the feed title</td>
  </tr>
  <tr class="odd">
    <td class="fixed">X-Channel-Description</td><td>the feed description</td>
  </tr>
</table>

<a name="acknowledgements"></a>
<H2>Acknowledgements</H2>
<p>
<ul>
<li><a href="http://the.taoofmac.com/space/">Rui Carmo</a>, for writing this documentation, for his Linux and MacOS testing and a lot of suggestions and bug reports.</li>
<li><a href="http://www.diveintomark.org/">Mark Pilgrim</a>, author of <tt>feedparser.py</tt> (<a href="http://www.feedparser.org/">download feedparser.py</a>)</li> 
<li><a href="http://www.aaronsw.com/">Aaron Swartz</a>, author of <tt>html2text.py</tt> (<a href="http://www.aaronsw.com/2002/html2text">download html2text.py</a>)</li>
</ul>

<a name="contact"></a>
<H2>Contact the Author</H2>
<p>You can contact the author of <tt>newspipe</tt> trough email at <a href="mailto:reyesric@ufasta.edu.ar">reyesric@ufasta.edu.ar</a></p>
<p>Any suggestion, bug reports, or comments are most welcome.</p>

<a name="references"></a>
<H2>References</H2>

<ul>
<li><a name="rss"></a><a href="http://blogs.law.harvard.edu/tech/rss">RSS 2.0 Specification</a></li>
<li><a name="atom"></a><a href="http://www.atomenabled.org/">Atom Enabled</a></li>
<li><a name="opml"></a><a href="http://www.opml.org/spec">OPML Specification</a>
</ul>

<a name="changelog"></a>
<H2>Changelog</H2>

<ul>
	<li class="release"> v1.0.1b &nbsp; 02-August-2004 
		<ul class="release_text">
			<li>manual.html updated to reflect the changes in v1.0.1.</li>
		</ul>
	</li>
	<li class="release"> v1.0.1 &nbsp; 01-August-2004 (Changes by Rui and Ricardo)
		<ul class="release_text">
			<li> HTML to Text conversion generates only one footnote for each link/image</li>
			<li> When downloading images, retry up to 3 times on timeouts </li>
			<li> Store all log, cache and data files at $HOME/.newspipe when running on UNIX, or $APPDATA/.newspipe when running on Windows</li>
			<li> Bugfix 2002: Parsing error in http://food.against.org/index.rdf </li>
			<li> Added "sender" override</li>
			<li> Changed mail processing to allow for any sender/destination </li>
			<li> Added support for sending a "mobile" version to an alternate e-mail address:
				<ul>
					<li>"mobile" attribute in OPML determines which feeds are copied</li>
					<li>ownerMobile value at top of OPML determines alternate e-mail address (point it to your MMS or mobile phone address)</li>
				</ul></li>
			<li> Refactoring of error handling in image download</li>
		</ul>
	</li>
	<li class="release"> v1.0 &nbsp; 21-July-2004 
		<ul class="release_text">
			<li>Initial release.</li>
		</ul>
	</li>
</ul>

</div>


</body>
</html>
