<html>
<head>
<meta name="version" value="$Id: manual.html,v 1.4 2004/07/25 12:17:47 rcarmo Exp $">
<style>
BODY { font-family: Arial, Helvetica, sans serif; }
a { text-decoration: none; }
H1 { font-size: 18pt; padding-top: 18pt; }
H2 { font-size: 14pt; padding-top: 14pt; }
H3 { font-size: 12pt; padding-top: 12pt; }
P, TH, LI { font-size: 10pt; text-align: justify;}
TH { border-bottom: 2px solid #6080d0; padding: 6px; }
TD { font-size: 9pt; vertical-align: top; text-align: left; padding: 4px;}
TR.odd { background-color: #d8e6ff; }
TT, .fixed { font-family: Courier New, Courier, fixed; }
.fixed { font-weight: bold; }
.flat { text-align: center; background-color: #d0e0ff; border: 0px solid #8080d0; border-spacing: 0px; }
</style>
<title>Newspipe</title>
</head>
<body>
<H1>Newspipe</H1>

<H2>Introduction</H2>

<p><tt>newspipe</tt> is an <a href="#rss">RSS</a>/<a href="#atom">Atom</A> aggregator with a difference: It allows you to keep track of your feeds through e-mail.</p>
<p>You can read, organize and archive news feeds with your current mail client, without the need for a separate program. <tt>newspipe</tt> collects all your news and sends it to you as plaintext or <tt>HTML</tt> mail, both as single items or grouped in a digest.</p>

<p><tt>newspipe</tt> is the creation of <a href="#ricardo">Ricardo M. Reyes</a>, and started out as an <a href="#rss">RSS</a>-to-<tt>POP3</tt> converter called <tt>rss2mail</tt>. Over time, it grew to the extent where real-time collection via <tt>POP3</tt> wasn't flexible enough, and it was retooled to work via <tt>SMTP</tt>.

<H2>Features</H2>

<ul>
<li>feeds are listed in an <a href="#opml">OPML</a> file</li>
<li>messages can be in <tt>HTML</tt>/multipart <tt>MIME</tt> format or plaintext</li>
<li>multiple items from a feed can be grouped and sent in a digest message</li>
<li>updated news items are detected and re-sent with <font color="#337700"><b>additions</b></font> and <font color="#FF0000"><STRIKE>deletions</STRIKE></font> highlighted</li>
</ul>

<H2>Requirements</H2>
<p>To use <tt>newspipe</tt>, you need:</p>

<ul>
<li><a href="http://www.python.org">Python</a> 2.3 or above</li>
<li>access to an <tt>SMTP</tt> server</li>
<li>a mail client (preferably one capable of displaying <tt>HTML</tt> mail)</li>
</ul>

<p><tt>newspipe</tt> has so far been successfully tested on:</p>
<ul>
<li>Windows (plain and <a href="http://www.cygwin.com">Cygwin</a>)</li>
<li>Linux</li>
<li>Mac OS X (10.3.x)</li>
</ul>

<H2>Installation</H2>


<H2>Configuration</H2>

<p>There are two main sets of configuration options program-wide options set via a .INI file, and per-feed options set inside the <a href="#opml">OPML</a> file.</p> 

<H3>.INI file Options</H3>

<table class="flat">
  <tr>
    <th>Key</th><th>Default</th><th>Notes</th>
  </tr>
  <tr class="odd">
    <td class="fixed">opml</td>
    <td><i>None</i></td>
    <td>REQUIRED - the filename or URL of the <a href="#opml">OPML</a> file with the list of feeds to check</td>
  </tr>
  <tr>
    <td class="fixed">smtp_server</td>
    <td><i>None</i></td>
    <td>REQUIRED - fully qualified domain name or IP address of the <tt>SMTP</tt> server to send messages through</td>
  </tr>
  <tr class="odd">
    <td class="fixed">textonly</td>
    <td>0</td>
    <td>if set to 1, all the messages sent by <tt>newspipe</tt> will be sent in plain text format.</td>
  </tr>
  <tr>
    <td class="fixed">log_console</td>
    <td>0</td>
    <td>If set to 1, this will send logging output to the console <i>and</i> to the log file.</td>
  </tr>
  <tr class="odd">
    <td class="fixed">check_online</td>
    <td><i>None</i></td>
    <td>If present, should be the URL of a webpage that the program will try to fetch to determine if there is a network connection available - useful for dialup users that may not be always online.<br>A good value for this is <a href="http://www.google.com">http://www.google.com</a>.</td>
  </tr>
  <tr>
    <td class="fixed">sleep_time</td>
    <td>5</td>
    <td>	Number of minutes to wait before re-checking feeds. If the value is 0, then the program will exit after checking all feeds, instead of waiting to start again (batch mode).</td>
  </tr>
  <tr class="odd">
    <td class="fixed">offline</td>
    <td>0</td>
    <td>If set to 1, the program won't try to fetch any data from the internet, using cached versions instead. Useful for debugging.</td>
  </tr>
  <tr>
    <td class="fixed">debug</td>
    <td>0</td>
    <td>If set to 1, logging becomes more verbose. Useful for debugging.</td>
  </tr>
  <tr class="odd">
    <td class="fixed">workers</td>
    <td>10</td>
    <td>Number of threads to use simultaneusly. Bigger numbers should mean better performance, but with increased memory and CPU use.<br>Dialup users may want to change this to 3, since more threads may also mean more timeout errors for them.</td>
  </tr>
  <tr>
    <td class="fixed">can_pipe</td>
    <td>0</td>
    <td><p>Enables <tt>pipe://</tt> URI support. When set to 1, the program will accept feed URLs that start with <tt>pipe://</tt> - and arbitrary protocol name used to tell <tt>newswire</tt> that to get the feed data, it should run the program or command after the <tt>pipe://</tt> and use its standard output as feed data.</p>
    <p>Example:</p>
    <tt>&lt;outline ... xmlURL="pipe://python.exe scrape_site.py" /&gt;</tt>
    <p>tells <tt>newspipe</tt> to run</p>
    <tt>python.exe scrape_site.py</tt>
    <p>and capture its standard output as feed data. This allows you to use screen-scraping scripts to generate feed data from sites that have no <a href="#rss">RSS</a> feeds, and since it makes <tt>newspipe</tt> invoke external programs, it is disabled by default as a security measure.
    </td>
  </tr>   
</table>
 
<H3>OPML Options</H3>

<p>Since <a href="#opml">OPML</a> is an hierarchical format, you can have multiple <tt>outline</tt> items nested inside each other. Some <tt>outline</tt> items will denote single feeds, and some will group related sets of feeds together.</p>
<p><tt>newspipe</tt> allows you to use any sort of layout you like, and lets you set feed options on a group basis or for a single feed:</p>

<p>(place example here)</p>

<table class="flat">
  <tr>
    <th>Attribute</th><th>Default</th><th>Notes</th>
  </tr>
  <tr class="odd">
    <td class="fixed">text</td>
    <td><i>None</i></td>
    <td>REQUIRED - Title of the feed, to be used in the log files.</td>
  </tr>
  <tr>
    <td class="fixed">htmlUrl</td>
    <td><i>None</i></td>
    <td>REQUIRED - URL of the site related to this feed. It's used in the "Home" link in the footer of each email.</td>
  </tr>
  <tr class="odd">
    <td class="fixed">xmlUrl</td>
    <td><i>None</i></td>
    <td>REQUIRED - URL of the RSS/Atom feed</td>
  </tr>
  <tr>
    <td class="fixed">digest</td>
    <td>0</td>
    <td>If set to "1", all the new or modified items in the feed will be grouped to a single email.</td>
  </tr>
  <tr class="odd">
    <td class="fixed">titles</td>
    <td>1</td>
    <td>If set to "0", the digest email will have a more compact format, without titles, separator, author name and date-time of each item. This setting only works when <tt>digest="1"</tt> and is useful in feeds that don't have titles in their items, like scripting.com.</td>
  </tr>
    <tr>
    <td class="fixed">download_link</td>
    <td>0</td>
    <td>If set to "1", Newspipe will download the webpage linked by each item, and use the html code of that page instead of the text of the item. This is useful to get full text entries of feeds that only have exerpts. Use with caution, the resulting emails can get really big when the linked webpage has too many images, or long text (like Slashdot's).</td>
  </tr>
  <tr class="odd">
    <td class="fixed">diff</td>
    <td>1</td>
    <td>If set to "1", <tt>newspipe</tt> will compare the text of each item with the previous version (if any) stored in the cache, and will highlight any <font color="#337700"><b>additions</b></font> and <font color="#FF0000"><STRIKE>deletions</STRIKE></font> in the text. You can disable this feature seting this parameter to "0" if it gets too distracting.</td>
  </tr>
  <tr class="odd">
    <td class="fixed">check_text</td>
    <td>1</td>
    <td>When this parameter is set to "0", Newspipe will not re-send items previously seen, even if the text of the item has changed. When set to "1", old items that have any change in their text will be treated as new items, and will be sent by email.</td>
  </tr>
  <tr>
    <td class="fixed">delay</td>
    <td>60</td>
    <td>Number of minutes to wait between checks to this feed.</td>
  </tr>
  <tr class="odd">
    <td class="fixed">textonly</td>
    <td>0</td>
    <td>If set to "1", the emails of this feed will be in plain-text format, instead of HTML.</td>
  </tr>
</table>

<H2>Mail Headers</H2>

<p><tt>newspipe</tt> adds a number of mail headers to messages that you can use to filter or classify them into folders, and which also provide some useful information as to what it has done to parse the feed:</p>

<table class="flat">
  <tr>
    <th>Header</th><th>Values & Meaning</th>
  </tr>
  <tr class="odd">
    <td class="fixed">X-Item-Attributes</td><td><i>add meaning of body, modified_parsed, link, title</i></td>
  </tr>
  <tr>
    <td class="fixed">X-Item-Text-Key</td><td><i>body</i></td>
  </tr>
  <tr class="odd">
    <td class="fixed">X-Newspipe-Version</td><td>program version number and revision</td>
  </tr>
  <tr>
    <td class="fixed">X-Channel-Feed</td><td>feed URL (same as the xmlURL field in the OPML file)</td>
  </tr>
  <tr class="odd">
    <td class="fixed">X-Channel-X-Cache-Result</td><td>whether the data was downloaded ("Downloaded")</td>
  </tr>
  <tr class="odd">
    <td class="fixed">X-Channel-Title</td><td>the feed title</td>
  </tr>
  <tr>
    <td class="fixed">X-Channel-Description</td><td>the feed description</td>
  </tr>
</table>

<H2>Acknowledgements</H2>
<p>
<ul>
<li><tt>feedparser.py</tt> by Mark Pilgrim</li>
<li><tt>html2text.py</tt> by Aaron Swartz (me@aaronsw.com)</li>
</ul>

<H2>References</H2>

<ul>
<li><a name="rss"></a><a href="http://blogs.law.harvard.edu/tech/rss">RSS 2.0 Specification</a></li>
<li><a name="atom"></a><a href="http://www.atomenabled.org/">Atom Enabled</a></li>
<li><a name="opml"></a><a href="http://www.opml.org/spec">OPML Specification</a>
</ul>

<H2>Changelog</H2>


</body>
</html>
